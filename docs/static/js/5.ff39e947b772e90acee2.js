webpackJsonp([5],{D1nt:function(t,e){},KKwZ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("woOf"),a=s.n(i),n=s("Dd8w"),o=s.n(n),r=s("cQcd");function c(t,e){var s={uin:0,format:"jsonp",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1,w:t,zhidaqu:1,catZhida:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,perpage:20,n:20,p:e,remoteplace:"txt.mqq.all"};return Object(r.a)("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",s,{param:"jsonpCallback"})}var l=s("G3uJ"),u=s("NYxO"),h={data:function(){return{hotlist:[],value:"",isShow:!1,suggestionList:[],pageNum:1,allLoaded:!1}},created:function(){this._getHotKey()},mounted:function(){this.getHeight()},computed:o()({},Object(u.e)(["searchHistory","playlist","sequencelist","currentIndex","fullScreen"]),Object(u.c)(["currentSong"])),watch:{value:function(){var t=this;this.pageNum=1,c(this.value,1).then(function(e){var s=e.data;t.suggestionList=[],s.song.list.forEach(function(e){var s={type:0};a()(s,Object(l.a)(e)),t.suggestionList.push(s)}),0!=s.zhida.type&&t.suggestionList.unshift(s.zhida)})}},methods:o()({},Object(u.d)(["addItem","removeItem","clearList","setFullScreenState","addItemPosition","setCurrentIndex","setPlayingState"]),Object(u.b)(["selectPlay"]),{_getHotKey:function(){var t=this;Object(r.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",{uin:0,format:"jsonp",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1},{param:"jsonpCallback"}).then(function(e){for(var s=0;s<10;s++)t.hotlist.push(e.data.hotkey[s])})},deleteValue:function(){this.value=""},toggleShow:function(t){this.isShow=t},loadBottom:function(){var t=this;c(this.value,this.pageNum++).then(function(e){var s=e.data;if(!s.song.list.length)return t.allLoaded=!0,void(t.$refs.suggestion.style.paddingBottom="80px");s.song.list.forEach(function(e){var s={type:0};a()(s,Object(l.a)(e)),t.suggestionList.push(s)})})},test:function(t){},getHeight:function(){var t=window.innerHeight-this.$refs.searchBar.clientHeight-84+"px";this.$refs.suggestion.style.height=t},getContent:function(t,e){switch(t.type){case 2:return"h3"===e?t.singername:"单曲："+t.songnum+" 专辑："+t.albumnum;case 3:return"h3"===e?t.albumname:t.singername;default:return"h3"===e?t.songname:t.singername}},addSearchHistory:function(t,e){var s=this;switch(-1===this.searchHistory.findIndex(function(t){return t===s.value})&&this.addItem({key:"searchHistory",song:this.value}),e){case 2:this.$router.push("/singerlist/singer/"+t.singermid);break;case 3:this.$router.push("/album/"+t.albummid);break;default:if(this.sequencelist.length){var i=this.playlist.findIndex(function(t){return t.id===s.currentSong.id});this.addItemPosition({key:"playlist",song:t,index:i+1}),this.setCurrentIndex(i+1),this.setPlayingState(!0),this.setFullScreenState(!0)}else{var a=[];a.push(t),this.selectPlay({list:a,index:0}),this.setFullScreenState(!0)}}},selectHotKey:function(t){this.value=t,this.isShow=!0}})},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"serach"},[s("div",{ref:"searchBar",staticClass:"search-bar"},[s("div",{staticClass:"input-warp"},[s("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text",placeholder:"搜索歌曲、歌单、专辑"},domProps:{value:t.value},on:{focus:function(e){return t.toggleShow(!0)},input:function(e){e.target.composing||(t.value=e.target.value)}}}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"iconfont icon-chahao",on:{click:t.deleteValue}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"cancel-btn",on:{click:function(e){return t.toggleShow(!1)}}},[t._v("取消")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShow,expression:"!isShow"}],staticClass:"hot-keys"},[s("h3",[t._v("热门搜索")]),t._v(" "),s("ul",t._l(t.hotlist,function(e,i){return s("li",{key:i,on:{click:function(s){return t.selectHotKey(e.k)}}},[s("span",[t._v(t._s(e.k))])])}),0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"focus-wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.value,expression:"!value"}],staticClass:"search-history"},[s("ul",[t._l(t.searchHistory,function(e,i){return s("li",{key:i,staticClass:"history",on:{click:function(s){t.value=e}}},[s("i",{staticClass:"iconfont icon-lishiyouxibitongjiweijihuo"}),t._v(" "),s("span",[t._v(t._s(e))]),t._v(" "),s("span",{staticClass:"cha",on:{click:function(e){return e.stopPropagation(),t.removeItem({key:"searchHistory",index:i})}}},[t._v("×")])])}),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.searchHistory.length,expression:"searchHistory.length"}],staticClass:"clearlist"},[s("i",{staticClass:"iconfont icon-lajitong1"}),t._v(" \n\t\t\t\t\t"),s("span",{on:{click:function(e){return t.clearList("searchHistory")}}},[t._v("清空搜索记录")])])],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],ref:"suggestion",staticClass:"search-suggestion"},[s("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded},on:{"bottom-status-change":t.test}},[s("ul",[t._l(t.suggestionList,function(e,i){return s("li",{key:i,on:{click:function(s){return t.addSearchHistory(e,e.type)}}},[s("div",{staticClass:"media-icon"},[s("i",{staticClass:"iconfont icon-yinle1"})]),t._v(" "),s("div",{staticClass:"media-text"},[s("h3",{domProps:{innerHTML:t._s(t.getContent(e,"h3"))}}),t._v(" "),s("p",{domProps:{innerHTML:t._s(t.getContent(e,"p"))}})])])}),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.allLoaded&&t.suggestionList.length,expression:"allLoaded&&suggestionList.length"}],staticClass:"allLoaded"},[t._v("已加载全部")])],2)])],1)])])},staticRenderFns:[]};var v=s("VU/8")(h,d,!1,function(t){s("D1nt")},"data-v-d79790a6",null);e.default=v.exports}});
//# sourceMappingURL=5.ff39e947b772e90acee2.js.map