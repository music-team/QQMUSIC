{"version":3,"sources":["webpack:///./src/api/getHotKey.js","webpack:///src/page/Search.vue","webpack:///./src/page/Search.vue?29b7","webpack:///./src/page/Search.vue"],"names":["getSuggestion","value","page","data","uin","format","inCharset","outCharset","notice","platform","needNewCode","w","zhidaqu","catZhida","t","flag","ie","sem","aggr","perpage","n","p","remoteplace","jsonp","param","Search","hotlist","isShow","suggestionList","pageNum","allLoaded","created","this","_getHotKey","mounted","getHeight","computed","extends_default","Object","vuex_esm","watch","_this","then","res","song","list","forEach","item","type","assign_default","js_song","push","zhida","unshift","methods","_this2","i","hotkey","deleteValue","toggleShow","loadBottom","_this3","length","$refs","suggestion","style","paddingBottom","test","a","suggestionHeight","window","innerHeight","searchBar","clientHeight","height","getContent","tag","singername","songnum","albumnum","albumname","songname","addSearchHistory","_this4","searchHistory","findIndex","history","addItem","key","$router","singermid","albummid","sequencelist","index2","playlist","id","currentSong","addItemPosition","index","setCurrentIndex","setPlayingState","setFullScreenState","selectPlay","selectHotKey","page_Search","render","_vm","_h","$createElement","_c","_self","staticClass","ref","_v","directives","name","rawName","expression","attrs","placeholder","domProps","on","focus","$event","input","target","composing","click","_l","k","_s","stopPropagation","removeItem","clearList","bottom-method","bottom-all-loaded","bottom-status-change","innerHTML","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.ff39e947b772e90acee2.js","sourcesContent":["import jsonp from '@/assets/js/jsonp'\r\n\r\nexport function getHotKey(){\r\n\tconst url = 'https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg'\r\n\tconst data = {\r\n\t\tuin: 0,\r\n\t\tformat: 'jsonp',\r\n\t\tinCharset: 'utf-8',\r\n\t\toutCharset: 'utf-8',\r\n\t\tnotice: 0,\r\n\t\tplatform: 'h5',\r\n\t\tneedNewCode: 1,\r\n\t}\r\n\treturn jsonp(url,data,{param:'jsonpCallback'})\r\n}\r\n\r\nexport function getSuggestion(value,page){\r\n\tconst url = 'https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp'\r\n\tconst data = {\r\n\t\tuin: 0,\r\n\t\tformat: 'jsonp',\r\n\t\tinCharset: 'utf-8',\r\n\t\toutCharset: 'utf-8',\r\n\t\tnotice: 0,\r\n\t\tplatform: 'h5',\r\n\t\tneedNewCode: 1,\r\n\t\tw: value,\r\n\t\tzhidaqu: 1,\r\n\t\tcatZhida: 1,\r\n\t\tt: 0,\r\n\t\tflag: 1,\r\n\t\tie: 'utf-8',\r\n\t\tsem: 1,\r\n\t\taggr: 0,\r\n\t\tperpage: 20,\r\n\t\tn: 20,\r\n\t\tp: page,\r\n\t\tremoteplace: 'txt.mqq.all',\r\n\t}\r\n\treturn jsonp(url,data,{param:'jsonpCallback'})\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/getHotKey.js","<template>\r\n\t<div class=\"serach\">\r\n\t\t<div class=\"search-bar\" ref=\"searchBar\">\r\n\t\t\t<div class=\"input-warp\">\r\n\t\t\t\t<i class=\"iconfont icon-sousuo\"></i>\r\n\t\t\t\t<input type=\"text\" v-model=\"value\" placeholder=\"搜索歌曲、歌单、专辑\" @focus=\"toggleShow(true)\">\r\n\t\t\t\t<i class=\"iconfont icon-chahao\" v-show=\"value\" @click=\"deleteValue\"></i>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"cancel-btn\" v-show=\"isShow\" @click=\"toggleShow(false)\">取消</div>\r\n\t\t</div>\r\n\t\t<div class=\"hot-keys\" v-show=\"!isShow\">\r\n\t\t\t<h3>热门搜索</h3>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"(item,index) in hotlist\" :key=\"index\" @click=\"selectHotKey(item.k)\">\r\n\t\t\t\t\t<span>{{item.k}}</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class=\"focus-wrapper\" v-show=\"isShow\">\r\n\t\t\t<div class=\"search-history\" v-show=\"!value\">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li v-for=\"(item,index) in searchHistory\" :key=\"index\" class=\"history\" @click=\"value=item\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-lishiyouxibitongjiweijihuo\"></i>\r\n\t\t\t\t\t\t<span>{{item}}</span>\r\n\t\t\t\t\t\t<span class=\"cha\" @click.stop=\"removeItem({key:'searchHistory',index})\">×</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"clearlist\" v-show=\"searchHistory.length\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-lajitong1\"></i>&ensp;\r\n\t\t\t\t\t\t<span @click=\"clearList('searchHistory')\">清空搜索记录</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"search-suggestion\" v-show=\"value\" ref=\"suggestion\">\r\n\t\t\t\t<mt-loadmore \r\n\t\t\t\t:bottom-method=\"loadBottom\" \r\n\t\t\t\t:bottom-all-loaded=\"allLoaded\"\r\n\t\t\t\t@bottom-status-change=\"test\" \r\n\t\t\t\tref=\"loadmore\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li v-for=\"(item,index) in suggestionList\" :key=\"index\" @click=\"addSearchHistory(item,item.type)\">\r\n\t\t\t\t\t\t\t<div class=\"media-icon\">\r\n\t\t\t\t\t\t\t\t<i class=\"iconfont icon-yinle1\"></i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"media-text\">\r\n\t\t\t\t\t\t\t\t<h3 v-html=\"getContent(item,'h3')\"></h3>\r\n\t\t\t\t\t\t\t\t<p v-html=\"getContent(item,'p')\"></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li v-show=\"allLoaded&&suggestionList.length\" class=\"allLoaded\">已加载全部</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</mt-loadmore>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport { getHotKey,getSuggestion } from '@/api/getHotKey'\r\n\timport { createSong } from '@/assets/js/song'\r\n\timport { mapState,mapGetters,mapMutations,mapActions } from 'vuex'\r\n\r\n\texport default {\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\thotlist:[],\r\n\t\t\t\tvalue:'',\r\n\t\t\t\tisShow:false,\r\n\t\t\t\tsuggestionList:[],\r\n\t\t\t\tpageNum:1,\r\n\t\t\t\tallLoaded:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis._getHotKey();\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.getHeight()\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState([\r\n\t\t\t\t'searchHistory',\r\n\t\t\t\t'playlist',\r\n\t\t\t\t'sequencelist',\r\n\t\t\t\t'currentIndex',\r\n\t\t\t\t'fullScreen'\r\n\t\t\t]),\r\n\t\t\t...mapGetters([\r\n\t\t\t\t'currentSong'\r\n\t\t\t]),\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tvalue(){\r\n\t\t\t\tthis.pageNum = 1\r\n\t\t\t\tgetSuggestion(this.value,1).then((res)=>{\r\n\t\t\t\t\tlet data=res.data\r\n\t\t\t\t\t//清空上一次搜索建议\r\n\t\t\t\t\tthis.suggestionList = []\r\n\t\t\t\t\tdata.song.list.forEach((item)=>{\r\n\t\t\t\t\t\tlet song = {\r\n\t\t\t\t\t\t\ttype: 0 //表示为歌曲类型\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tObject.assign(song,createSong(item))\r\n\t\t\t\t\t\tthis.suggestionList.push(song)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (data.zhida.type!=0) {\r\n\t\t\t\t\t\tthis.suggestionList.unshift(data.zhida)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations([\r\n\t\t\t\t'addItem',\r\n\t\t\t\t'removeItem',\r\n\t\t\t\t'clearList',\r\n\t\t\t\t'setFullScreenState',\r\n\t\t\t\t'addItemPosition',\r\n\t\t\t\t'setCurrentIndex',\r\n\t\t\t\t'setPlayingState'\r\n\t\t\t]),\r\n\t\t\t...mapActions([\r\n\t\t\t\t'selectPlay'\r\n\t\t\t]),\r\n\t\t\t_getHotKey(){\r\n\t\t\t\tgetHotKey().then((res)=>{\r\n\t\t\t\t\tfor(let i=0;i<10;i++){\r\n\t\t\t\t\t\tthis.hotlist.push(res.data.hotkey[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteValue(){\r\n\t\t\t\tthis.value=''\r\n\t\t\t},\r\n\t\t\ttoggleShow(flag){\r\n\t\t\t\tthis.isShow = flag\r\n\t\t\t},\r\n\t\t\tloadBottom(){\r\n\t\t\t\tgetSuggestion(this.value,this.pageNum++).then((res)=>{\r\n\t\t\t\t\tlet data=res.data\r\n\t\t\t\t\tif (!data.song.list.length) {\r\n\t\t\t\t\t\tthis.allLoaded = true\r\n\t\t\t\t\t\tthis.$refs.suggestion.style.paddingBottom = 80+'px'\r\n\t\t\t\t\t\treturn \r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.song.list.forEach((item)=>{\r\n\t\t\t\t\t\tlet song = {\r\n\t\t\t\t\t\t\ttype: 0 //表示为歌曲类型\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tObject.assign(song,createSong(item))\r\n\t\t\t\t\t\tthis.suggestionList.push(song)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t//为什么添加了下面一句话后没有loading状态？\r\n\t\t\t\t// this.$refs.loadmore.onBottomLoaded()\r\n\t\t\t},\r\n\t\t\ttest(a){\r\n\t\t\t\t// console.log(a)\r\n\t\t\t},\r\n\t\t\tgetHeight(){\r\n\t\t\t\tlet totalHeight = window.innerHeight;\r\n\t\t\t\tlet searchBarHeight = this.$refs.searchBar.clientHeight\r\n\t\t\t\tlet suggestionHeight = totalHeight - searchBarHeight - 84 + 'px'\r\n\t\t\t\tthis.$refs.suggestion.style.height = suggestionHeight\r\n\t\t\t},\r\n\t\t\tgetContent(item,tag){\r\n\t\t\t\t//此函数是获取不同类型搜索建议的内容\r\n\t\t\t\tswitch (item.type) {\r\n\t\t\t\t\tcase 2 : \r\n\t\t\t\t\t\tif (tag === 'h3') {\r\n\t\t\t\t\t\t\treturn item.singername\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\treturn `单曲：${item.songnum} 专辑：${item.albumnum}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 3 : \r\n\t\t\t\t\t\tif (tag === 'h3') {\r\n\t\t\t\t\t\t\treturn item.albumname\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\treturn item.singername\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tdefault : \r\n\t\t\t\t\t\tif (tag === 'h3') {\r\n\t\t\t\t\t\t\treturn item.songname\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\treturn item.singername\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddSearchHistory(item,type){\r\n\t\t\t\tlet idx = this.searchHistory.findIndex((history)=>{\r\n\t\t\t\t\treturn history === this.value\r\n\t\t\t\t})\r\n\t\t\t\tif (idx === -1) {\r\n\t\t\t\t\tthis.addItem({\r\n\t\t\t\t\t\tkey:'searchHistory',\r\n\t\t\t\t\t\tsong:this.value\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 2:{\r\n\t\t\t\t\t\tthis.$router.push('/singerlist/singer/'+item.singermid)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 3:{\r\n\t\t\t\t\t\tthis.$router.push('/album/'+item.albummid)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault :{\r\n\t\t\t\t\t\tif (!this.sequencelist.length) {\r\n\t\t\t\t\t\t\tlet list=[]\r\n\t\t\t\t\t\t\tlist.push(item)\r\n\t\t\t\t\t\t\tthis.selectPlay({\r\n\t\t\t\t\t\t\t\tlist,\r\n\t\t\t\t\t\t\t\tindex:0\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.setFullScreenState(true)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// let index1 = this.sequencelist.findIndex((song)=>{\r\n\t\t\t\t\t\t\t// \treturn song.id === this.currentSong.id\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t// this.addItemPosition({\r\n\t\t\t\t\t\t\t// \tkey:'sequencelist',\r\n\t\t\t\t\t\t\t// \tsong:item,\r\n\t\t\t\t\t\t\t// \tindex:index1+1\r\n\t\t\t\t\t\t\t// })\r\n\r\n\t\t\t\t\t\t\tlet index2 = this.playlist.findIndex((song)=>{\r\n\t\t\t\t\t\t\t\treturn song.id === this.currentSong.id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.addItemPosition({\r\n\t\t\t\t\t\t\t\tkey:'playlist',\r\n\t\t\t\t\t\t\t\tsong:item,\r\n\t\t\t\t\t\t\t\tindex:index2+1\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.setCurrentIndex(index2+1)\r\n\t\t\t\t\t\t\tthis.setPlayingState(true)\r\n\t\t\t\t\t\t\tthis.setFullScreenState(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tselectHotKey(value){\r\n\t\t\t\tthis.value = value\r\n\t\t\t\tthis.isShow = true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped>\r\n\t.search-bar{\r\n\t\tdisplay: flex;\r\n\t\tbackground: #f4f4f4;\r\n\t\tpadding: 10px;\r\n\t}\r\n\t.input-warp{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tflex-grow: 1;\r\n\t\theight: 20px;\r\n\t    padding: 8px 10px;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-sizing: content-box;\r\n\t\tcolor: rgba(0,0,0,.3);\r\n\t}\r\n\t.input-warp i{\r\n\t\tfont-size: 18px;\r\n\t}\r\n\tinput::-webkit-input-placeholder{\r\n\t\tcolor: rgba(0,0,0,.3);\r\n\t}\r\n\t.input-warp input{\r\n\t\tmargin: 0 5px;\r\n\t\tflex-grow: 1;\r\n\t\toutline: none;\r\n\t\tcolor: rgba(0,0,0,.3);\r\n\t}\r\n\t.cancel-btn{\r\n\t\theight: 36px;\r\n    \tline-height: 36px;\r\n    \tfont-size: 14px;\r\n    \tpadding: 0 5px 0 15px;\r\n    \tcolor: #555;\r\n\t}\r\n\r\n\t.hot-keys{\r\n\t\tpadding: 15px;\r\n\t}\r\n\t.hot-keys>h3{\r\n\t\tcolor: rgba(0,0,0,.6);\r\n\t\tmargin-bottom: 15px;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t.hot-keys li{\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 5px 10px;\r\n\t\tmargin: 0 20px 10px 0;\r\n\t\tborder-radius: 6px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #000;\r\n\t\tborder: 1px solid rgba(0,0,0,.6);\r\n\t}\r\n\t.search-suggestion{\r\n\t\theight: 300px;\r\n\t\toverflow: auto;\r\n\t}\r\n\t.search-suggestion li{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 10px 20px;\r\n\t}\r\n\t.search-suggestion .allLoaded{\r\n\t\tdisplay: block;\r\n\t\ttext-align: center;\r\n\t\tcolor: rgba(0,0,0,.6);\r\n\t}\r\n\t.search-suggestion .media-icon i{\r\n\t\tfont-size: 30px;\r\n\t\tcolor: rgba(0,0,0,.6);\r\n\t}\r\n\t.search-suggestion .media-text{\r\n\t\twidth: 80%;\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t.search-suggestion .media-text h3{\r\n\t\tcolor: #444;\r\n\t\tfont-size: 15px;\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t.search-suggestion .media-text p{\r\n\t\tcolor: #777;\r\n\t\tfont-size: 14px;\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t.search-history li{\r\n\t\tposition: relative;\r\n\t\tpadding: 10px 20px;\r\n\t\tcolor: rgba(0,0,0,.6);\r\n\t}\r\n\t.search-history .clearlist{\r\n\t\tdisplay: block;\r\n\t\twidth: 170px;\r\n\t\tmargin: 0 auto;\r\n\t\tcolor: #777;\r\n\t}\r\n\t.search-history .clearlist i{\r\n\t\tcolor: #777;\r\n\t\tfont-size: 18px;\r\n\t}\r\n\t.search-history .history i{\r\n\t\tdisplay: inline-block;\r\n\t\tfont-size: 23px;\r\n\t\tmargin-right: 15px;\r\n\t\ttransform: translateY(2px);\r\n\t\tvertical-align: bottom;\r\n\t}\r\n\t.search-history .cha{\r\n\t\tposition: absolute;\r\n\t\tright: 30px;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t\tcolor: #ccc;\r\n\t\tfont-size: 28px;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/page/Search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"serach\"},[_c('div',{ref:\"searchBar\",staticClass:\"search-bar\"},[_c('div',{staticClass:\"input-warp\"},[_c('i',{staticClass:\"iconfont icon-sousuo\"}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value),expression:\"value\"}],attrs:{\"type\":\"text\",\"placeholder\":\"搜索歌曲、歌单、专辑\"},domProps:{\"value\":(_vm.value)},on:{\"focus\":function($event){return _vm.toggleShow(true)},\"input\":function($event){if($event.target.composing){ return; }_vm.value=$event.target.value}}}),_vm._v(\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.value),expression:\"value\"}],staticClass:\"iconfont icon-chahao\",on:{\"click\":_vm.deleteValue}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow),expression:\"isShow\"}],staticClass:\"cancel-btn\",on:{\"click\":function($event){return _vm.toggleShow(false)}}},[_vm._v(\"取消\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShow),expression:\"!isShow\"}],staticClass:\"hot-keys\"},[_c('h3',[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.hotlist),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.selectHotKey(item.k)}}},[_c('span',[_vm._v(_vm._s(item.k))])])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow),expression:\"isShow\"}],staticClass:\"focus-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.value),expression:\"!value\"}],staticClass:\"search-history\"},[_c('ul',[_vm._l((_vm.searchHistory),function(item,index){return _c('li',{key:index,staticClass:\"history\",on:{\"click\":function($event){_vm.value=item}}},[_c('i',{staticClass:\"iconfont icon-lishiyouxibitongjiweijihuo\"}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',{staticClass:\"cha\",on:{\"click\":function($event){$event.stopPropagation();return _vm.removeItem({key:'searchHistory',index: index})}}},[_vm._v(\"×\")])])}),_vm._v(\" \"),_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"clearlist\"},[_c('i',{staticClass:\"iconfont icon-lajitong1\"}),_vm._v(\" \\n\\t\\t\\t\\t\\t\"),_c('span',{on:{\"click\":function($event){return _vm.clearList('searchHistory')}}},[_vm._v(\"清空搜索记录\")])])],2)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.value),expression:\"value\"}],ref:\"suggestion\",staticClass:\"search-suggestion\"},[_c('mt-loadmore',{ref:\"loadmore\",attrs:{\"bottom-method\":_vm.loadBottom,\"bottom-all-loaded\":_vm.allLoaded},on:{\"bottom-status-change\":_vm.test}},[_c('ul',[_vm._l((_vm.suggestionList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.addSearchHistory(item,item.type)}}},[_c('div',{staticClass:\"media-icon\"},[_c('i',{staticClass:\"iconfont icon-yinle1\"})]),_vm._v(\" \"),_c('div',{staticClass:\"media-text\"},[_c('h3',{domProps:{\"innerHTML\":_vm._s(_vm.getContent(item,'h3'))}}),_vm._v(\" \"),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.getContent(item,'p'))}})])])}),_vm._v(\" \"),_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allLoaded&&_vm.suggestionList.length),expression:\"allLoaded&&suggestionList.length\"}],staticClass:\"allLoaded\"},[_vm._v(\"已加载全部\")])],2)])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d79790a6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/Search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d79790a6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Search.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d79790a6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d79790a6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/Search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}